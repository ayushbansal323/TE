
<html>

<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="https:&#x2F;&#x2F;global-uploads.webflow.com&#x2F;5d1c3b898da842444794ccc0&#x2F;6201c41ef0a4eb6a1c202f2e_Zeni%20Symbol%20Primary%20Black%20(Default).png" type="image/icon type">

    <style>
        * {
            margin: 0;
            padding: 0;
        }
        .imgbox {
            display: grid;
            height: 100%;
        }
        .center-fit {
            max-width: 100%;
            max-height: 100vh;
            margin: auto;
        }
    </style>
    <title>Zeni - Modern Finance Team For Startups</title>
</head>
    <body>
    <div class="imgbox">
    <img class="center-fit"  src="test_gpt_cx.png" alt="">
    </div>

<script src="https://www.gstatic.com/dialogflow-console/fast/messenger-cx/bootstrap.js?v=1"></script>

<df-messenger
        chat-icon="https:&#x2F;&#x2F;global-uploads.webflow.com&#x2F;5d1c3b898da842444794ccc0&#x2F;6201c41ef0a4eb6a1c202f2e_Zeni%20Symbol%20Primary%20Black%20(Default).png"
  df-cx="true"
  location="us-central1"
  chat-title="FINA"
  agent-id="26a61c31-1c61-4211-ba1d-0e334f905a19"
  language-code="en"
        style="--df-messenger-button-titlebar-color:rgb(243, 245, 247);--df-messenger-button-titlebar-font-color:black;"
></df-messenger>
        <script>
            var input = ""
            console.log("location.hash")
            const dfMessenger = document.querySelector('df-messenger');


            dfMessenger.addEventListener('df-response-received', function (event) {
                console.log("event2")
                console.log(event)
                console.log(event.detail.response.queryResult.queryText)
                query_text = event.detail.response.queryResult.queryText


                  url = "https://chatbot-test-dot-accounting-dot-zeni-apis-dev.uc.r.appspot.com/1.0/open_ai_recommendation"
                  data = {
                    "query" : query_text
                  }
                  const response = fetch(url, {
                        method: "POST", // *GET, POST, PUT, DELETE, etc.
                        credentials: "same-origin", // include, *same-origin, omit
                        headers: {
                          "Content-Type": "application/json",
                          "zeni-user-id": "u_ecf110ea-1ca9-4551-9471-cbbb49909607",
                          "zeni-tenant-id": "tenant_745cc76c-5a82-4d2c-b9dc-9d1f283a4445",
                          "zeni-session-id": "session_cfeaf541-7a87-4e0e-88cc-4932541f9a96"
                        },
                        referrerPolicy: "no-referrer", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
                        body: JSON.stringify(data), // body data type must match "Content-Type" header
                          }).then((data) => {
                                  console.log("data");
                                  console.log(data); // JSON data parsed by `data.json()` call
                                  data_json = data.json()

                                  data_json.then(response => {
                                  console.log("response");
                                  console.log(response);
                                  options = response.options

                                  create_options = []

                                  console.log(options)
                                  for (var i = 0; i < options.length; i++) {
                                        console.log(options[i]);
                                        option = options[i]
                                        create_option = {
                                            "text": option
                                        }
                                        create_options.push(create_option)
                                  }
                                  console.log(create_options)
                                  const payload_chips = [
                                  {
                                    "type": "chips",
                                    "options": create_options
                                  }];
                                  console.log(payload_chips);
                                  dfMessenger.renderCustomCard(payload_chips);
                      console.log(data_json);
                    })
                })
              })



        </script>
    </body>
</html>
